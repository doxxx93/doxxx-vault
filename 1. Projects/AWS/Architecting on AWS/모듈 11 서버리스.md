---
date_created: 2024-06-10 19:04
author: 
date_published: 
url:
---
# 모듈 11 서버리스

![](Pasted%20image%2020240610190552.png)

# Amazon API Gateway

## Amazon API Gateway의 기능

- 개발자가 API를 생성, 게시, 유지 관리, 모니터링 및 보안 유지할 수 있도록 돕는 완전 관리형 서비스
- RESTful API 및 WebSocket API 작성 가능
- 다양한 규모에서의 사용 가능

## 사용 사례

- 서드 파티 개발자용 서비스 제공
- 백엔드 서비스의 데이터, 비즈니스 로직, 기능에 액세스할 수 있는 '문' 역할

## API Gateway의 장점

## 확장성 및 모니터링

- 운영 오버헤드를 최소화하면서 보안 위협 방지
- Lambda 함수, EC2 인스턴스, 기타 AWS 서비스와의 통합 가능
- Direct Connect를 통해 온프레미스로 요청 전달 가능
- 여러 마이크로서비스를 위한 통합 API 프런트엔드 생성 가능

## 보안 및 인증

- AWS IAM, Amazon Cognito와 같은 AWS 보안 도구를 사용하여 API 액세스 권한 부여
- DDoS 보호 및 제한 기능 제공
- API 요청 조절, 측정, 수익 창출 가능(API 키 사용)

## API Gateway와 연동 가능한 서비스

## 다양한 서비스와의 통합

- **Lambda 함수:** 서버리스 형태로 마이크로서비스 구성
- **EC2 인스턴스:** 퍼블릭 엔드포인트와의 통합
- **온프레미스 서비스:** Direct Connect를 통한 통합
- **S3:** 정적 웹페이지 호스팅

## API Gateway의 예시 아키텍처

- 애플리케이션 클라이언트가 웹사이트에 요청 → S3 버킷에서 정적 웹페이지 제공
- 브라우저 내부에서 API Gateway로 요청을 보내는 로직 포함
- API Gateway가 요청을 Lambda 함수에 전달
- Lambda 함수가 DynamoDB 테이블에 데이터 쓰기/읽기
- CloudWatch Logs로 로그 전송 및 기록
- API Gateway 캐시 프로비저닝 및 크기 지정 가능

## 주요 기능 요약

## API 생성 및 관리

- **API 작성:** RESTful API 및 WebSocket API 작성 가능
- **배포 및 유지 관리:** API의 배포 및 유지 관리 용이

## 보안 및 인증

- **AWS 보안 도구 통합:** AWS IAM, Amazon Cognito와의 통합을 통해 인증 및 승인 관리
- **API 키:** 타사 개발자를 위한 API 요청 조절 및 수익 창출 가능

## 성능 최적화

- **캐싱:** API 호출에 캐싱 추가 가능, 성능 개선 및 백엔드 트래픽 감소

# Amazon SQS

## Amazon SQS의 기능 및 장점
- **완전 관리형 메시지 대기열 서비스:** 관리 부담 없이 최소한의 구성으로 사용 가능
- **확장성:** 하루에 수십억 건의 메시지 처리 가능
- **고가용성:** 여러 가용 영역을 사용하여 높은 가용성 보장
- **비동기 처리:** 발신자와 수신자 간 버퍼 역할을 통해 느슨하게 결합된 아키텍처 설계 가능

## 사용 사례
- **온프레미스 3티어 아키텍처:** 웹 서버와 애플리케이션 서버가 밀접하게 연결된 구조에서 메시지 대기열을 사용해 확장성 및 탄력성 확보
- **클라우드 환경에서의 문제 해결:** EC2 인스턴스에 메시지 대기열을 구성할 필요 없이 SQS 사용

## 느슨한 결합 아키텍처 예시
![](Pasted%20image%2020240610200726.png)
1. **생산자 애플리케이션:** 고객 주문 생성 후 Amazon SQS 대기열로 전송
2. **소비자 애플리케이션:** 대기열을 폴링하고 메시지 수신, Amazon RDS 데이터베이스에 기록 후 메시지 삭제
3. **배달 못한 편지 대기열:** 처리할 수 없는 메시지를 나중에 처리할 수 있도록 저장

## 느슨한 결합의 이점
- **비동기식 처리:** 생산자와 소비자 로직의 격리
- **내결함성:** 트랜잭션 장애 발생 시 주문 처리 재시도 가능
- **트래픽 급증 처리:** 대기열을 버퍼로 사용해 급증하는 트래픽을 처리

## SQS 대기열의 활용

## 표준 대기열 vs FIFO 대기열
- **표준 대기열:** 최소 1회 전송 보장, 높은 처리량, 메시지 순서 보장 X
- **FIFO 대기열:** 정확히 1회 전송 보장, 메시지 순서 보장, 초당 API 호출 수 제한

## 가시성 제한 시간
- **가시성 제한 시간:** 메시지가 다른 소비자에게 보이지 않도록 설정하는 시간, 기본값 30초

## 폴링 유형
- **짧은 폴링:** 빠른 응답, 높은 비용
- **긴 폴링:** 비용 절감, 실시간 응답 불가능

## SQS의 주요 활용 사례

## 비동기 작업 처리
- **상태 변경 알림:** 애플리케이션 상태 변화 시 비동기적으로 관리자에게 알림

## 메시지 대기열 안티 패턴
- **메시지 크기 제한:** 기본적으로 256KB 제한, 큰 메시지는 S3에 저장 후 위치 정보를 메시지에 포함

## Auto Scaling과의 통합
- **Auto Scaling:** SQS 대기열의 메시지 수를 기반으로 EC2 인스턴스 수 조정

Amazon SQS는 클라우드 환경에서 확장성과 가용성을 보장하며 운영 오버헤드를 최소화할 수 있는 강력한 메시지 대기열 서비스입니다. 이를 통해 비동기 작업을 효과적으로 처리하고, 트래픽 급증 시에도 안정적인 성능을 유지할 수 있습니다.