---
date_created: 2024-06-10 17:24
author: 
date_published: 
url:
---
# 모듈 10 네트워킹-2

# VPC 엔드포인트

## 개요

- VPC 엔드포인트는 VPC 내의 리소스가 AWS 서비스와 통신할 수 있도록 연결을 제공
- 예: 프라이빗 서브넷에 있는 EC2 인스턴스가 Amazon DynamoDB와 통신

## 필요성

- NAT 게이트웨이를 통해 인터넷을 경유하지 않고 AWS 네트워크 내에서 통신
- 보안 및 성능 향상

## VPC 엔드포인트 유형

### 게이트웨이 엔드포인트

- 지원 서비스: S3, DynamoDB
- 라우팅 테이블에 접두사 목록 구성
- 라우팅 규칙 구성으로 인터넷 경유 없이 통신 가능

### 인터페이스 엔드포인트

- 다양한 서비스 지원 (예: AWS Systems Manager, EC2)
- 프라이빗 서브넷 내 ENI(Elastic Network Interface) 생성
- DNS를 통해 인터페이스 엔드포인트로 라우팅
- 보안 그룹을 사용하여 트래픽 규칙 설정 가능

## 게이트웨이 엔드포인트 구성
![](Pasted%20image%2020240610181919.png)
![](Pasted%20image%2020240610174315.png)

- 라우팅 테이블에 접두사 목록 (예: S3.prefix.list, DynamoDB.prefix.list)
- 라우팅 규칙을 통해 프라이빗 서브넷에서 VPC 외부 서비스와 통신

## 인터페이스 엔드포인트 구성

![](Pasted%20image%2020240610174415.png)
- ENI에 프라이빗 IP 할당
- DNS를 통해 서비스 엔드포인트로 라우팅
- 보안 그룹 설정을 통해 트래픽 제어
- 라우팅 테이블 변경 불필요

## 디버깅

- 통신 문제 발생 시 인터페이스의 보안 그룹 규칙 확인
- 보안 그룹 설정이 올바른지 확인하여 트래픽 허용

## 요약

- 게이트웨이 엔드포인트: S3, DynamoDB 지원, 라우팅 테이블 구성 필요
- 인터페이스 엔드포인트: 다양한 서비스 지원, ENI 생성, DNS 라우팅, 보안 그룹 설정 필요

# VPC 피어링

## 개요

![](Pasted%20image%2020240610174816.png)
- VPC 피어링: VPC 간에 프라이빗 방식으로 트래픽을 라우팅하여 네트워크 연결을 가능하게 함
- 기본적으로 VPC는 다른 VPC와 논리적으로 격리되어 통신 불가능

## 필요성

- 다른 VPC와의 통신 필요성 증가
- 예: 빌드 환경(VPC A)에서 개발 환경(VPC B)으로 아티팩트 전달

## VPC 피어링 구성

- 리전 간 또는 교차 계정 간 연결 가능
- 상호 합의 필요: 요청자와 수락자가 피어링 요청과 수락
- 피어링 채널 생성 후 라우팅 테이블에 네트워크 경로 지정

## 구성 절차

1. **피어링 요청 및 수락**
   - 요청자가 피어링 요청을 보내고 수락자가 요청 수락
2. **라우팅 테이블 설정**
   - 각 VPC의 라우팅 테이블에 피어링 연결 구성
   - IP 공간 중복 방지

## 일반적인 사용 사례

- 다른 회사의 AWS 인프라에 호스팅된 애플리케이션 접근
- 인터넷 게이트웨이 또는 가상 프라이빗 게이트웨이 우회하여 프라이빗 IP 주소로 통신
- 고가용성 연결 제공, 대역폭 병목 현상 없음

## 제약 사항

- 피어링 연결은 일대일 관계
- 전위적 피어링 미지원: A -> B, B -> C 연결 시 A -> C로의 통신 불가

## 전위적 피어링 예시

![](Pasted%20image%2020240610175019.png)
- VPC A와 VPC B, VPC B와 VPC C 피어링 연결
- VPC A와 VPC C 간 피어링 연결 추가 필요

## 풀 메시 피어링

![](Pasted%20image%2020240610175059.png)
- 다수의 VPC 간 피어링 연결 구성
- VPC A와 B, C, D, E 등 각각의 VPC 간 연결 필요
- 라우팅 테이블에 각 VPC로의 경로 지정 필요
- VPC 수 증가 시 네트워크 경로 복잡성 증가

## 해결 방안: Transit Gateway

- Transit Gateway를 이용해 복잡한 피어링 문제 해결
- 중앙 허브 역할, 여러 VPC 간의 라우팅 단순화

## 요약

- VPC 피어링: VPC 간 프라이빗 통신을 위한 네트워크 연결
- 구성 시 상호 합의와 라우팅 테이블 설정 필요
- 전위적 피어링 미지원, 풀 메시 피어링 시 복잡성 증가
- Transit Gateway로 문제 해결 가능

# 하이브리드 네트워킹 옵션

![](Pasted%20image%2020240610175148.png)

## 개요

- AWS 클라우드와 온프레미스 데이터센터를 동시에 활용하는 하이브리드 네트워킹
- 데이터센터와 AWS 클라우드를 안전하게 연결하는 다양한 옵션 존재

## VPN 연결

### 구성 방법
![](Pasted%20image%2020240610175306.png)
1. **고객 게이트웨이 디바이스 설정**
   - 온프레미스 데이터센터의 물리적 하드웨어를 AWS에서 리소스로 생성
2. **가상 프라이빗 게이트웨이 연결**
   - VPC와 연결하여 VPN 연결 생성
3. **구성 파일 내보내기**
   - 데이터센터에서 디바이스를 구성할 수 있도록 AWS에서 구성 파일 제공

### 특징

- 가상 프라이빗 게이트웨이에 중복성 내장
- 두 개의 엔드포인트로 구성, 유지 관리 시에도 연결 유지 가능
- 고객 게이트웨이 디바이스가 두 엔드포인트 사이에서 전환 가능

## Direct Connect

### 구성 방법

1. **Direct Connect 로케이션 설정**
   - 온프레미스 데이터센터와 Direct Connect 로케이션을 전용선으로 연결
2. **로컬 서비스 공급자 협력**
   - 서비스 공급자가 Direct Connect 로케이션에 대한 연결 제공

### 특징

- 높은 용량 제공
- 포트 시간 및 데이터 전송량에 따라 요금 부과
- 다양한 속도로 프로비저닝 가능 (1Gbps 미만, 1Gbps, 10Gbps, 100Gbps)

## 비교: Site-to-Site VPN vs. Direct Connect

고객 게이트웨이 디바이스와 Virtual Private Gateway가 있어야함

### Site-to-Site VPN

- **대역폭 제한**: 최대 1.25Gbps
- **구성 속도**: 빠름, 직접 구성 가능
- **비용**: 비활성 연결에 대해 비용 없음
- **암호화**: 기본적으로 암호화된 터널 사용

### Direct Connect

- **대역폭**: 다양한 속도 선택 가능 (1Gbps 미만, 1Gbps, 10Gbps, 100Gbps)
- **구성 속도**: 느림, 데이터센터 합의와 물리적 케이블 연결 필요
- **비용**: 포트 시간과 데이터 전송량에 따라 요금 부과
- **암호화**: 기본적으로 암호화되지 않음, 추가 암호화 구성 필요

## 요약

- 하이브리드 네트워킹을 위해 VPN 연결과 Direct Connect 사용 가능
- VPN 연결: 빠르고 간편하게 구성 가능, 기본적으로 암호화됨
- Direct Connect: 높은 용량과 다양한 속도 제공, 포트 시간과 데이터 전송량에 따라 요금 부과, 추가 암호화 필요

# AWS Transit Gateway

## 개요
- VPC 피어링은 일대일 관계를 가지므로 VPC 개수가 많아지면 복잡해짐
- AWS Transit Gateway는 단일 위치에서 네트워크 경로를 제공하고 제어할 수 있는 관리형 서비스
- 최대 5000개의 VPC와 온프레미스 환경 연결 가능
- VPN, Direct Connect, 다른 VPC와의 연결 지원

## 특징
### 유연한 라우팅 및 세분화
- 단일 위치에서 라우팅 규칙 작성 가능
- 많은 네트워킹 리소스 통합
- 트래픽 제어 가능
![](Pasted%20image%2020240610181210.png)
### 고가용성 및 확장성
- AWS에서 관리, 단순히 생성하고 제어
- 라우팅 규칙을 통해 VPC 간 통신 제어
- 다양한 네트워크 연결 지원 (VPC, VPN, Direct Connect, Transit Gateway 피어링 등)
![](Pasted%20image%2020240610181241.png)
## 사용 사례
### VPC 간의 연결
- 여러 VPC (개발, 프로덕션 등) 연결 가능
- VPC 간 라우팅 규칙 작성 및 제어

### 온프레미스 네트워크와의 연결
- 데이터센터와 VPN, Direct Connect 통해 연결 가능
- 트래픽의 원본 및 대상을 제어

### 네트워크 격리
- VPC 간 통신 규칙 설정 가능
- 특정 VPC 간 통신 차단 및 격리 가능

## 예시
### 전체 연결
- 모든 VPC 간 통신 가능
- 모든 VPC가 VPN을 통해 온프레미스 네트워크에 연결 가능

### 부분 연결
- VPC A와 C는 통신 가능, B와 D는 통신 불가
- VPC B와 D는 통신 가능, A와 C는 통신 불가
- 라우팅 테이블을 통해 격리 가능

### 온프레미스와의 전용 통신
- 각 VPC 간 통신 불가, 온프레미스 네트워크와만 연결 가능

## 정리
- Transit Gateway는 네트워크를 유연하게 제어할 수 있는 관리형 서비스
- 다양한 연결 옵션과 고가용성, 확장성 제공
- 단일 위치에서 네트워크 경로를 제어하여 복잡성을 줄이고 효율성을 높임