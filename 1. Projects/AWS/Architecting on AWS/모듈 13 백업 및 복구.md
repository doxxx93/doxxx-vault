---
date_created: 2024-06-11 11:03
author: 
date_published: 
url:
---
# 모듈 13 백업 및 복구

![](Pasted%20image%2020240611110925.png)
재해 발생 시 인프라를 보호하고 신속히 복구하는 재해 복구(Disaster Recovery, DR) 전략은 애플리케이션마다 다를 수 있으며, 이는 조직의 필요와 중요도에 따라 달라집니다. 다음은 재해 복구를 계획하고 실행할 때 고려해야 할 주요 요소입니다.

## 재해 복구 계획 수립

모든 재해 복구 계획이 동일하지는 않습니다. 중요한 것은 애플리케이션별로 요구사항과 중요도를 평가하고 적절한 복구 계획을 수립하는 것입니다.

### 재해 복구 계획의 요소

1. **테스트 계획**: 재해 복구 계획이 효과적인지 확인하려면 정기적으로 테스트해야 합니다. 테스트하지 않은 계획은 믿을 수 없습니다.
2. **서비스 식별**: 어떤 서비스를 복제할지, 백업 및 복원할지를 결정합니다.
3. **프로덕션 시스템 목표**: 다운타임을 최소화하고 가용성을 최대화하는 고가용성, 내결함성, 백업, 재해 복구의 네 가지 개념을 고려해야 합니다.

### 중요 개념

- **고가용성(High Availability, HA)**: 애플리케이션의 다운타임을 최소화합니다.
- **내결함성(Fault Tolerance)**: 데이터 복제를 통해 기본 제공 내결함성을 제공합니다.
- **백업(Backup)**: 데이터를 백업하여 필요 시 복구할 수 있게 합니다.
- **재해 복구(Disaster Recovery)**: 중대한 재해 발생 후 애플리케이션과 데이터를 복구합니다.

## 데이터 복제와 백업의 차이

- **데이터 복제(Data Replication)**: 데이터를 실시간으로 다른 위치에 복제하는 것으로, 물리적 오류에 대비해 가용성을 높이는 데 유용합니다.
- **백업(Backup)**: 데이터를 특정 시점에 저장하여 필요 시 복원할 수 있게 하는 것입니다. 복제된 데이터도 백업이 필요합니다.

## 다중 리전 사용

AWS 클라우드에서는 대부분의 재해 복구 전략이 다중 리전을 사용합니다. 다중 리전을 활용하면 단일 리전 장애에도 애플리케이션을 복구할 수 있습니다.

## RPO와 RTO

![](Pasted%20image%2020240611111242.png)
- **RPO(Recovery Point Objective)**: 데이터 손실 허용 시간, 즉 마지막 백업 시점부터 재해 발생 시점까지의 데이터 손실을 의미합니다.
- **RTO(Recovery Time Objective)**: 복구 시간 목표, 즉 재해 발생 후 시스템이 정상적으로 작동하는 데 걸리는 시간을 의미합니다.

## AWS 재해 복구 전략

1. **스토리지 관리**: 데이터 복제 및 백업 계획 수립.
   - ![](Pasted%20image%2020240611111551.png)
   - **Amazon S3**: 리전 간 복제.
   - **Amazon EBS**: 특정 시점 볼륨 스냅샷 생성.
   - **AWS Snow Family**: 대량 데이터 전송 및 백업.
   - **AWS DataSync**: 온프레미스 또는 클라우드 파일 시스템과 동기화.
2. **EC2 인스턴스 및 AMI 관리**: AMI를 다른 리전으로 내보내어 신속하게 인스턴스 생성.
	1. ![](Pasted%20image%2020240611111600.png)
3. **Route 53 사용**: 상태 확인을 통해 다중 리전 전략 구현.
	1. ![](Pasted%20image%2020240611111610.png)
4. **Elastic Load Balancer**: 여러 가용 영역에서 트래픽 로드 밸런싱.
5. **AWS Direct Connect**: 온프레미스 네트워크를 AWS로 확장.
6. **Amazon RDS**: 데이터 스냅샷 및 다중 AZ 클러스터 배포.
	1. ![](Pasted%20image%2020240611111622.png)
7. **Amazon DynamoDB**: 특정 시점으로 복구 및 글로벌 테이블 사용.
8. **자동화 도입**: AWS CloudFormation 또는 스크립트를 사용하여 아키텍처 프로비저닝 자동화.
	1. ![](Pasted%20image%2020240611111631.png)

## 결론

재해 복구 계획을 수립하고 실행할 때는 각 애플리케이션의 중요도와 요구사항을 철저히 평가하고, 다중 리전 전략, 데이터 복제 및 백업, 그리고 자동화 도구를 활용하여 신속하고 효과적인 복구를 목표로 해야 합니다. 이를 통해 시스템의 가용성을 높이고, 재해 발생 시 데이터 손실과 다운타임을 최소화할 수 있습니다.

# AWS Backup: 중앙 집중화된 백업 관리

**AWS Backup**은 완전 관리형 백업 서비스로, 여러 AWS 서비스의 백업을 중앙에서 관리하고 자동화할 수 있는 강력한 도구입니다. AWS Backup을 통해 다양한 서비스의 데이터를 중앙 집중화된 위치에서 시각적으로 확인하고, 백업 정책을 적용하며, 백업 일정을 자동으로 예약할 수 있습니다. 다음은 AWS Backup의 주요 기능과 이점입니다.

## AWS Backup의 주요 기능

### 중앙 집중화된 백업 관리

AWS Backup은 다음과 같은 AWS 리소스의 백업을 중앙에서 관리할 수 있습니다:
- **Amazon DynamoDB 테이블**
- **Amazon Aurora 데이터베이스**
- **Amazon RDS 인스턴스**
- **Amazon EC2 인스턴스**
- **Amazon EFS 파일 시스템**
- **Amazon EBS 볼륨 및 스냅샷**
- **Amazon FSx for Windows File Server**
- **Amazon FSx for Lustre**
- **AWS Storage Gateway 볼륨**

### 시각적 백업 관리

AWS Backup 콘솔을 통해 모든 백업을 한눈에 시각적으로 확인할 수 있습니다. 이는 백업 상태를 쉽게 모니터링하고, 불필요한 백업을 식별하여 효율적으로 관리하는 데 도움이 됩니다.

### 정책 기반 및 태그 기반 백업

백업 일정을 자동으로 예약하고, 정책 기반 및 태그 기반 백업 솔루션을 적용할 수 있습니다. 예를 들어, 특정 태그가 있는 리소스만 백업하는 정책을 설정할 수 있습니다.

### 백업 일정 관리

백업 계획을 생성하여 백업 주기와 수명 주기를 관리할 수 있습니다. 예를 들어, 매일 백업을 생성하고, 백업 데이터를 30일 동안 보관한 후 자동으로 삭제하는 계획을 세울 수 있습니다.

### AWS Organizations 지원

AWS Backup은 **AWS Organizations**와 통합되어 여러 AWS 계정의 백업을 중앙에서 관리할 수 있습니다. 이는 여러 계정을 사용하는 조직에서 특히 유용합니다. 예를 들어, 프로덕션 계정의 백업은 유지하고, 개발 계정의 백업은 생략하여 비용을 절감할 수 있습니다.

### CloudWatch 지표 통합

AWS Backup은 **Amazon CloudWatch**와 통합되어 백업 활동에 대한 지표를 모니터링할 수 있습니다. 이는 백업 상태를 실시간으로 추적하고, 문제 발생 시 신속하게 대응하는 데 유용합니다.

### 비용 효율적인 백업 관리

AWS Backup을 사용하면 백업 리소스를 중앙에서 관리하고 모니터링하여 비용을 효율적으로 관리할 수 있습니다. 예를 들어, 사용하지 않는 리전의 EBS 볼륨 스냅샷을 식별하고 삭제할 수 있습니다.

## AWS Backup의 작동 방식

1. **백업 계획 생성**: 백업 계획을 생성하여 백업 주기와 수명 주기를 설정합니다.
2. **리소스 할당**: 백업할 리소스를 백업 계획에 할당합니다.
3. **백업 일정 지정**: 백업 일정을 설정하여 백업 작업을 자동으로 수행합니다.
4. **모니터링 및 관리**: 백업 상태를 모니터링하고, 불필요한 백업을 삭제하여 비용을 절감합니다.

### 백업 수명 주기 관리

백업 수명 주기를 설정하여 백업 데이터를 일정 기간 후에 삭제하거나 아카이빙할 수 있습니다. 예를 들어, 7일 후에 백업 데이터를 삭제하는 수명 주기를 설정할 수 있습니다.

### 태그를 통한 백업 관리

리소스에 태그를 지정하여 특정 태그가 있는 리소스만 백업할 수 있습니다. 이는 정책 기반 백업 관리에 유용합니다.

## 결론

AWS Backup은 중앙 집중화된 백업 관리 솔루션으로, 여러 AWS 서비스의 백업을 효율적으로 관리하고 자동화할 수 있습니다. 이를 통해 백업 관리의 복잡성을 줄이고, 비용을 절감하며, 데이터 보호 및 복구 전략을 강화할 수 있습니다. AWS Backup을 사용하면 중요한 데이터를 안전하게 보호하고, 재해 발생 시 신속하게 복구할 수 있습니다.

# AWS를 활용한 주요 복구 전략

재해 복구 전략은 서비스 가용성을 보장하고 데이터 손실을 최소화하기 위해 매우 중요합니다. AWS에서는 다양한 재해 복구 전략을 제공하며, 각 전략은 복구 시간 목표(RTO)와 복구 시점 목표(RPO)에 따라 다릅니다. 이번 세션에서는 네 가지 주요 복구 전략인 백업 및 복원, 파일럿 라이트, 웜 스탠바이, 다중 사이트 액티브-액티브에 대해 살펴보겠습니다.

## 1. 백업 및 복원 (Backup and Restore)

![](Pasted%20image%2020240611114530.png)

### 설명

백업 및 복원 전략은 가장 기본적이고 이해하기 쉬운 전략입니다. 주기적으로 데이터를 백업하여, 장애가 발생하면 이 백업 데이터를 사용해 복원합니다.

### 장점

- **비용 효율적**: 정기적으로 백업만 수행하므로 비용이 저렴합니다.
- **간단함**: 구현과 관리가 비교적 간단합니다.

### 단점

- **높은 RPO**: 마지막 백업 시점 이후의 데이터는 복구할 수 없습니다. 예를 들어, 매일 오전 6시에 백업하는데 오전 5시 59분에 장애가 발생하면 하루치 데이터를 잃을 수 있습니다.
- **높은 RTO**: 백업을 복원하는 데 시간이 걸립니다.

### 예시

- **Amazon S3**: 데이터를 정기적으로 백업하고, S3 수명 주기 정책을 적용하여 오래된 데이터를 자동으로 삭제하거나 Glacier로 이동시킬 수 있습니다.
- **Amazon Storage Gateway**: 온프레미스 데이터를 Amazon S3로 백업할 수 있습니다.

## 2. 파일럿 라이트 (Pilot Light)

![](Pasted%20image%2020240611114537.png)

### 설명

파일럿 라이트 전략은 필수적인 구성 요소만 미리 준비해 두고, 장애 발생 시 나머지 리소스를 신속하게 시작하는 방식입니다. 중요한 데이터는 항상 복제되며, 필요할 때만 애플리케이션 서버 등을 시작합니다.

### 장점

- **비용 효율적**: 필수적인 데이터 복제만 유지하므로 비용이 적게 듭니다.
- **데이터 안전성**: 데이터는 항상 복제되어 있으므로 안전합니다.

### 단점

- **높은 RTO**: 필요한 리소스를 시작하는 데 시간이 걸립니다.
- **복잡성**: 리소스를 신속하게 시작하고, 네트워크 및 애플리케이션을 구성하는 데 추가적인 노력이 필요합니다.

### 예시

- **Amazon Aurora** 또는 **DynamoDB 글로벌 테이블**을 사용하여 데이터 복제.
- **Amazon Route 53** 상태 확인을 통해 웹 애플리케이션 시작.

## 3. 웜 스탠바이 (Warm Standby)

![](Pasted%20image%2020240611114543.png)

### 설명

웜 스탠바이 전략은 프로덕션 환경의 축소판을 항상 실행 상태로 유지하는 방식입니다. 필요시 확장하여 전체 프로덕션 환경으로 전환합니다.

### 장점

- **낮은 RTO**: 이미 실행 중인 리소스를 확장하는 데 시간이 적게 걸립니다.
- **데이터 안전성**: 데이터가 항상 최신 상태로 유지됩니다.

### 단점

- **비용 증가**: 파일럿 라이트보다 더 많은 리소스를 항상 실행 상태로 유지해야 하므로 비용이 더 듭니다.
- **복잡성**: 프로덕션 환경의 축소판을 항상 유지해야 합니다.

### 예시

- **Amazon Route 53** 가중치 기반 DNS 라우팅을 사용하여 트래픽의 일부를 복구 리전으로 분배.
- **Auto Scaling**을 통해 필요시 리소스를 자동으로 확장.

## 4. 다중 사이트 액티브-액티브 (Multi-Site Active-Active)

![](Pasted%20image%2020240611114548.png)

### 설명

다중 사이트 액티브-액티브 전략은 여러 리전에서 전체 프로덕션 환경을 동시에 실행하는 방식입니다. 모든 트래픽을 두 리전으로 분배하여 처리합니다.

### 장점

- **최소 RTO와 RPO**: 두 리전 모두 항상 활성 상태이므로 장애 발생 시 즉시 대응할 수 있습니다.
- **고가용성**: 한 리전에서 장애가 발생해도 다른 리전이 서비스를 계속 제공합니다.

### 단점

- **비용 비효율성**: 두 리전에서 모든 리소스를 항상 실행 상태로 유지하므로 비용이 가장 많이 듭니다.
- **복잡성**: 두 리전에서 동일한 프로덕션 환경을 유지하고 관리해야 합니다.

### 예시

- **Amazon Route 53**을 사용하여 트래픽을 두 리전으로 분할.
- **데이터베이스 복제**를 통해 데이터 일관성 유지.

## 비교 및 결론

| 전략 | 비용 | RTO | RPO | 사용 사례 |
| --- | --- | --- | --- | --- |
| 백업 및 복원 | 가장 낮음 | 높음 | 높음 | 개인 블로그, QA 환경 |
| 파일럿 라이트 | 낮음 | 중간 | 중간 | 데이터 중요, 비용 효율성 요구 |
| 웜 스탠바이 | 중간 | 낮음 | 낮음 | 비즈니스 크리티컬 서비스 |
| 다중 사이트 액티브-액티브 | 가장 높음 | 매우 낮음 | 매우 낮음 | 고가용성 필수, 실시간 서비스 |

각 전략은 특정 상황과 요구 사항에 따라 적합할 수 있습니다. 비용과 복구 시간 요구 사항을 고려하여 적절한 재해 복구 전략을 선택하는 것이 중요합니다.

# 실습 7 캡스톤 실습 - AWS 멀티 티어 아키텍처 구축

![](Pasted%20image%2020240611134629.png)
