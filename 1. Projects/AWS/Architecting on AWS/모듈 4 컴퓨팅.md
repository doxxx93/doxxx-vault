---
date_created: 2024-05-28 16:54
author: 
date_published: 
url:
---
# 모듈 4 컴퓨팅

# EC2 인스턴스

- EC2 인스턴스 소개:
    
    - EC2는 가상 머신 서비스로, 전세계의 AWS 리전에서 호스팅됨.
    - 클라우드에서 안전하고 크기 조정 가능한 컴퓨팅 용량 제공.
    - API 호출을 통해 몇 분 또는 몇 초 내에 인스턴스 생성 가능.
    - 애플리케이션을 올리거나 데이터베이스를 설치할 수 있음.
- EC2 인스턴스 시작 시 고려 사항:
    
    - 태그: AWS 리소스의 관리를 위한 키-값 데이터.
    - AMI 선택: 인스턴스 시작을 위한 이미지 템플릿.
    - 인스턴스 유형: CPU, 메모리, 네트워크 등의 구성에 따라 다름.
    - 키 페어 생성: SSH로 인스턴스에 연결하기 위한 키.
    - 테넌시 선택: 공유, 전용, 전용 호스트 등의 옵션.
- 배치 그룹 옵션:
    
    - 클러스터 배치 그룹: 인스턴스를 가까운 곳에 실행하여 네트워크 처리량을 최적화.
    - 분산형 배치 그룹: 서로 다른 하드웨어에서 실행되며 내결함성이 필요한 경우에 사용.
    - 파티션 배치 그룹: 여러 파티션을 생성하여 클러스터 및 분산형 배치 그룹을 조합하여 사용.
- 사용자 데이터 및 메타데이터 활용:
    
    - 사용자 데이터: 부트스트래핑을 통해 인스턴스 시작 시 자동으로 실행되는 작업 정의.
    - 메타데이터: 인스턴스 관련 정보를 가져오기 위한 활용 가능한 정보 제공.

### EC2 인스턴스 패밀리

![](Pasted%20image%2020240528165814.png)

### AWS Compute Optimizer

![](Pasted%20image%2020240528165923.png)

# EC2 인스턴스용 스토리지

![](Pasted%20image%2020240528170353.png)

- Amazon EBS 볼륨:
    
    - 안정적이고 분리 가능한 블록 수준의 스토리지.
    - 인스턴스에 탑재되어 데이터의 저장과 사용이 짧은 지연 시간을 제공.
    - 단일 EC2 인스턴스에 여러 EBS 볼륨을 연결하거나 다른 인스턴스로 이동 가능.
    - SSD 지원 볼륨과 HDD 지원 볼륨으로 나뉨.
- SSD 지원 볼륨:
    
    - 범용 타입과 프로비저닝된 IOPS 타입으로 구성.
    - 가성비 우수한 범용 타입이 일반적이지만, 추가 IO 성능 필요 시 프로비저닝된 IOPS 타입 선택 가능.
- HDD 지원 볼륨:
    
    - 처리량 최적화 타입과 콜드 HDD 타입으로 구성.
    - 저렴한 비용의 하드디스크를 원하는 경우, 자주 액세스하는 데이터는 st1 타입에, 자주 액세스하지 않는 데이터는 sc1 타입에 저장 가능.
- 인스턴스 스토어:
    
    - 인스턴스 타입 중 일부에 제공되는 호스트에 연결된 스토리지.
    - 인스턴스 중지 시 해당 디스크의 데이터는 모두 사라지므로 임시 데이터에만 사용.

# Amazon EC2 요금 옵션

- EC2 인스턴스 요금 옵션:
    
    - 온디맨드: 기본 옵션, 사용한 만큼 지불.
    - Savings Plan: 1년 또는 3년 약정으로 최대 72% 할인.
    - 스팟 인스턴스: 여분의 용량을 저렴하게 이용, 최대 90% 할인.
- Savings Plan:
    
    - Compute Savings Plan: 유연한 사용 가능, 시간당 10달러 소모 시 여러 리전에서 EC2 인스턴스 활성화 가능.
    - Instance Savings Plan: 더 많은 할인, 일정성이 있으나 유연성은 다소 제한.
- 스팟 인스턴스:
    
    - 최대 90% 할인 가능.
    - 중단 가능성 있음, 대응책 필요.
    - 스팟 인스턴스는 상태를 저장하거나 사용하는 인스턴스에는 권장되지 않음.
- 비용 최적화 방법:
    
    - 인스턴스 Savings Plan: 고정 비용에 최대 할인.
    - Compute Savings Plan: 인스턴스 유형 변경이 필요한 경우.
    - 스팟 인스턴스: 상관없는 워크로드에 대응할 때 사용.

# AWS Lambda

- Lambda는 AWS의 서버리스 컴퓨팅 서비스로, 인프라 관리와 운영에 대한 걱정 없이 코드 실행이 가능하다.
- 함수 생성은 런타임 환경 선택 후 코드를 Lambda에 전달하는 과정을 거친다.
- 각 실행 환경은 원하는 시간 동안 활성화되며, 메모리 및 CPU 할당량은 유동적이다.
- Lambda는 동시에 여러 요청을 처리하고, 호출에 대한 구성만 신경쓰면 된다.
- 직접 호출 또는 다른 AWS 서비스의 이벤트 소스로 활용할 수 있다.
- 다양한 AWS 서비스를 이벤트 소스로 활용하여 자동으로 함수를 트리거할 수 있다.
- Lambda는 비용 효율적이며 웹 애플리케이션, 백엔드, 데이터 처리 등 다양한 태스크에 사용된다.
- 서버 유지 관리와 확장성에 대한 고민 없이 애플리케이션에만 집중하고 싶은 경우 Lambda가 적합하다.

# Architecting on AWS - 실습 2: Amazon VPC 인프라 구축

![](Pasted%20image%2020240602141301.png)

## 과제 1: 특정 리전에 Amazon VPC 생성

![](Pasted%20image%2020240528171240.png)

- **Resources to create:**  _VPC only_를 선택합니다.
- **Name tag - _optional_:** Lab VPC를 입력합니다.
- **IPv4 CIDR:** 10.0.0.0/16 을 입력합니다.
	-  Lab VPC의 Classless Inter-Domain Routing(CIDR) 범위는 **10.0.0.0/16**이며, **10.0.x.x**로 시작하는 모든 IP 주소가 포함됩니다. 이 범위에는 65,000개 이상의 주소가 포함됩니다. 나중에 이 주소를 별도의 서브넷으로 분할합니다.
- 
- **Edit VPC settings** 페이지가 표시됩니다.
	- **Enable DNS hostnames**를 선택합니다.
		- 이 옵션은 VPC의 Amazon EC2 인스턴스에 다음과 같은 친숙한 도메인 이름 시스템(DNS) 이름을 할당합니다.
		- ec2-52-42-133-255.us-west-2.compute.amazonaws.com
		- 이제 이 Amazon VPC에서 시작되는 모든 Amazon EC2 인스턴스는 DNS 호스트 이름을 자동으로 수신합니다. Amazon Route 53을 사용하여 나중에 좀 더 의미 있는 DNS 이름(예: _app.company.com_)을 추가할 수도 있습니다.

## 과제 2: 퍼블릭 서브넷 및 프라이빗 서브넷 생성

VPC에 새 서브넷을 추가하려면 VPC의 범위에서 서브넷의 IPv4 CIDR 블록을 지정해야 합니다. 서브넷을 위치할 가용 영역을 지정할 수 있습니다. 동일한 가용 영역에 여러 서브넷을 위치할 수 있습니다.
![](Pasted%20image%2020240602142233.png)

### 퍼블릭 서브넷

 **참고:** _서브넷_은 네트워크 내 IP 주소의 하위 범위입니다. 지정된 서브넷으로 AWS 리소스를 시작할 수 있습니다. 인터넷에 연결해야 하는 리소스에는 _퍼블릭 서브넷_을 사용하고, 인터넷과 격리된 상태를 유지해야 하는 리소스에는 _프라이빗 서브넷_을 사용합니다.

 **참고:** VPC의 CIDR 범위는 **10.0.0.0/16**이며, 여기에는 모든 **10.0.x.x IP** 주소가 포함됩니다. 방금 생성한 서브넷의 CIDR 범위는 **10.0.0.0/24**이며, 모든 **10.0.0.x** IP 주소가 포함되어 있습니다. 이러한 범위는 서로 비슷해 보이지만, 서브넷은 CIDR 범위가 **/24**이기 때문에 VPC보다 작습니다.

### 프라이빗 서브넷

 **참고:** CIDR 블록 **10.0.2.0/23**에는 **10.0.2.x** 및 **10.0.3.x**로 시작하는 모든 IP 주소가 포함되어 있습니다. 인터넷에서 액세스할 수 있어야 하는 특별한 경우를 제외하고 프라이빗 서브넷은 대부분의 리소스를 프라이빗으로 유지해야 하기 때문에 크기가 퍼블릭 서브넷의 두 배입니다.

## 과제 3: 인터넷 게이트웨이 생성

이 과제에서는 인터넷 트래픽이 퍼블릭 서브넷에 액세스할 수 있도록 인터넷 게이트웨이를 생성합니다. 그리고 VPC의 서브넷에 있는 인스턴스에서 인터넷에 액세스하는 권한이나 인터넷에서 해당 인스턴스에 액세스하는 권한을 부여하기 위해 인터넷 게이트웨이를 생성하여 VPC에 연결합니다. 그런 다음 인터넷 바운드 트래픽을 인터넷 게이트웨이로 보내는 경로를 서브넷의 라우팅 테이블에 추가합니다.

## 과제 4: 퍼블릭 서브넷의 인터넷 트래픽을 인터넷 게이트웨이로 라우팅

## 과제 5: 퍼블릭 보안 그룹 생성

## 과제 6: 퍼블릭 서브넷에서 Amazon EC2 인스턴스 시작

이 과제에서는 퍼블릭 서브넷에서 Amazon EC2 인스턴스를 시작합니다. 인터넷을 통한 IPv4 통신을 활성화하려면 인스턴스에 해당 인스턴스의 프라이빗 IPv4 주소와 연결된 퍼블릭 IPv4 주소가 있어야 합니다. 기본적으로 인스턴스는 VPC와 서브넷 안에서 정의된 프라이빗(내부) IP 주소 공간만 인식합니다.

KeyPair는 SSH 로그인을 위함이므로 SSH 안할거면 안만들어도 됨



![](Pasted%20image%2020240602143607.png)

## 과제 7: HTTP를 통해 퍼블릭 인스턴스에 연결

## 과제 8: Session Manager를 통해 퍼블릭 서브넷의 Amazon EC2 인스턴스에 연결

## 과제 9: NAT 게이트웨이를 생성하고 프라이빗 서브넷에서 라우팅 구성

이 과제에서는 NAT 게이트웨이를 생성한 다음 라우팅 테이블을 생성하여 비로컬 트래픽을 NAT 게이트웨이로 라우팅합니다. 그런 다음 라우팅 테이블을 프라이빗 서브넷에 연결합니다. NAT 게이트웨이를 사용하여 프라이빗 서브넷의 인스턴스를 인터넷 또는 기타 AWS 서비스에 연결하는 한편, 인터넷에서 해당 인스턴스와의 연결을 시작하지 못하도록 할 수 있습니다.

 **참고:** NAT 게이트웨이를 생성하려면 NAT 게이트웨이가 속할 퍼블릭 서브넷을 지정해야 합니다. NAT 게이트웨이를 생성할 때 NAT 게이트웨이와 연결할 탄력적 IP 주소도 지정해야 합니다. 탄력적 IP 주소는 NAT 게이트웨이에 연결한 후 변경할 수 없습니다. NAT 게이트웨이를 생성한 후에는 인터넷 바운드 트래픽이 NAT 게이트웨이를 가리키도록 하나 이상의 프라이빗 서브넷과 연결된 라우팅 테이블을 업데이트해야 합니다. 그러면 프라이빗 서브넷의 인스턴스가 인터넷과 통신할 수 있습니다.

## 과제 10: 프라이빗 리소스용 보안 그룹 생성

## 과제 11: 프라이빗 서브넷에서 Amazon EC2 인스턴스 시작

## 과제 12: 프라이빗 서브넷의 Amazon EC2 인스턴스에 연결

